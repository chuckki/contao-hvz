function scrollToAnchor(t,d) {
    d = d || 10;
    var e = $("#" + t);
    if(d != 10){
        var e = $(t);
    };
    var o = e.offset().top - d;
    if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){
        window.scrollTo(0,e.offset().top - d);
    }else{
        $("html,body").animate({ scrollTop: o }, 800, function() {
            $("html,body").clearQueue()
        });
    }
}
$(document).ready(function() {

    if($("label.error").length){
        scrollToAnchor("label.error",11);
    }
    if($("p.error").length && !$("label.error").length){
        scrollToAnchor("p.error",11);
    }
    $('p.error').append('<i class="fa fa-info-circle"></i>');

  function detachSearch(){
    $('#tahpending').detach();
    isShown = false;
  }
 
  var isShown = false;

  $('#tags').on('typeahead:asyncrequest', function(evt, item, arg) {
    if(!isShown){
      $('.twitter-typeahead').append('<i id="tahpending" class="fa fa-spinner fa-spin"></i>');
      isShown = true;
    }
  });

  $('#tags').on('typeahead:asyncreceive', function(evt, item, arg) {detachSearch();});
  $('#tags').on('typeahead:close', function(evt, item, arg,tay) {detachSearch();});
  $('#tags').on('typeahead:idle', function(evt, item, arg,tay) {detachSearch();});
  $('#tags').on('typeahead:asynccancel', function(evt, item, arg,tay) {detachSearch();});

  $('#tags').focus(function(){ $('.sexp').show();});
  $('#tags').blur(function(){ $('.sexp').hide();});

  $(".result").hover(
    function () {
      $(this).addClass("hover");
    },
    function () {
      $(this).removeClass("hover");
    }
  );

  $(".result").click(function(){ window.location.href = $(this).find('a').attr('href');});

        function t() {
            if ($(window).width() < 800) {
                if ($(".togClick").hasClass("acc") || (0 == $(".trigger_active").length && $(".togClick").first().addClass("trigger_active"), $(".togClick").not(".trigger_active").next().hide(), $(".togClick").addClass("acc"), $(".togClick").on("click", function() {
                        var t = $(this);
                        return t.hasClass("trigger_active") ? (t.next().slideUp("fast"), t.removeClass("trigger_active")) : ($(".trigger_active").next().slideUp("fast"), $(".trigger_active").removeClass("trigger_active"), t.next().slideDown("fast"), t.addClass("trigger_active")), !1
                    })), $(".featuredlist a").addClass("btn"), 0 == $("#toTop").length) {
                    var t = ['<div id="toTop" class="fa fa-arrow-up"></div>'].join("");
                    $("#footer").append(t)
                }
            } else $(".togClick").hasClass("acc") && ($(".togClick").removeClass("acc"), $(".togClick").off(), $(".togClick").next().show()), $(".featuredlist a").removeClass("btn"), $("#toTop").remove()
        }
        var e = ['<div id="nav4Menu" ontouchstart="return true;" class="open fa fa-bars fa-3x"></div>'].join("");
        $(".logo").append(e), $(window).on("resize", function() {
            t()
        }), t()
    }), $(function() {
        var t = $("#nav4Menu");
        menu = $("#navWrapper"), menuHeight = menu.height(), $(t).on("click", function(t) {
            t.preventDefault(), menu.slideToggle()
        }), $(window).resize(function() {
            var t = $(window).width();
            t > 800 && $("#navWrapper").is(":hidden") && $("#navWrapper").removeAttr("style")
        });

    }), $(function() {
        $(window).scroll(function() {
            $(this).scrollTop() >= 0 ? ($("#toTop").fadeIn(800), $.doTimeout("scroll", 2e3, function() {
                $(this).scrollTop() >= 0 && $("#toTop").fadeOut(400)
            })) : $("#toTop").fadeOut()
        }), $("#toTop").click(function() {
            $("body,html").animate({
                scrollTop: 0
            }, 600)
        })
    }),
    function(t) {
        function e(e) {
            function i() {
                e ? r.removeData(e) : u && delete o[u]
            }

            function a() {
                l.id = setTimeout(function() {
                    l.fn()
                }, $)
            }
            var r, c = this,
                l = {},
                s = e ? t.fn : t,
                f = arguments,
                d = 4,
                u = f[1],
                $ = f[2],
                g = f[3];
            if ("string" != typeof u && (d--, u = e = 0, $ = f[1], g = f[2]), e ? (r = c.eq(0), r.data(e, l = r.data(e) || {})) : u && (l = o[u] || (o[u] = {})), l.id && clearTimeout(l.id), delete l.id, g) l.fn = function(t) {
                "string" == typeof g && (g = s[g]), g.apply(c, n.call(f, d)) !== !0 || t ? i() : a()
            }, a();
            else {
                if (l.fn) return void 0 === $ ? i() : l.fn($ === !1), !0;
                i()
            }
        }
        var o = {},
            i = "doTimeout",
            n = Array.prototype.slice;
        t[i] = function() {
            return e.apply(window, [0].concat(n.call(arguments)))
        }, t.fn[i] = function() {
            var t = n.call(arguments),
                o = e.apply(this, [i + t[0]].concat(t));
            return "number" == typeof t[0] || "number" == typeof t[1] ? this : o
        }
    }(jQuery);
